/* skPlayer by Scott */
!function(a){var b={timeFormat:function(a){var b=parseInt(a/60),c=parseInt(a%60),d=b<10?"0"+b:b,e=c<10?"0"+c:c;return d+":"+e},leftDistance:function(a){for(var b=a.offsetLeft;a.offsetParent;)a=a.offsetParent,b+=a.offsetLeft;return b}};skPlayer=function(a){function c(){"undefined"!=k.loop&&1==k.loop&&(o.loop=!0),n=this.duration,u.innerText="00:00",v.innerText=b.timeFormat(parseInt(n)),1==o.volume&&(o.volume=.7,s.style.width="70%"),w.style.backgroundColor="rgba(255,255,255,.0)",w.style.color="rgba(117,101,98,.0)",setTimeout(function(){w.style.display="none",p.addEventListener("click",g)},900)}function d(){n=this.duration}function e(){var a=parseInt(o.currentTime),c=a/n*100;q.style.width=c.toFixed(2)+"%",u.innerText=b.timeFormat(a)}function f(){p.classList.remove("pause"),x.classList.remove("pause"),u.innerText="00:00",q.style.width=0}function g(){o.paused?o.play():o.pause(),Array.prototype.indexOf.call(p.classList,"pause")>=0?(p.classList.remove("pause"),x.classList.remove("pause")):(p.className="play-btn pause",x.className="cover pause")}function h(){var a=(event.pageX-b.leftDistance(this))/this.offsetWidth;q.style.width=100*a+"%",o.currentTime=parseInt(a*n)}function i(){var a=(event.pageX-b.leftDistance(this))/this.offsetWidth;s.style.width=100*a+"%",o.volume=a.toFixed(2)}function j(){o.addEventListener("canplaythrough",c),o.addEventListener("durationchange",d),o.addEventListener("timeupdate",e),o.addEventListener("ended",f),r.addEventListener("click",h),t.addEventListener("click",i)}if(!(a.src&&a.name&&a.author&&a.cover))return void console.error("请正确配置对象！");var k=a,l=document.getElementById("skPlayer"),m='<audio src="'+k.src+'" preload="auto"></audio>';m+='<div class="picture">',m+='    <img src="'+k.cover+'" alt="" class="cover">',m+='    <a href="javascript:;" class="play-btn">',m+='        <span class="left"></span>',m+='        <span class="right"></span>',m+="    </a>",m+="</div>",m+='<div class="control">',m+='    <p class="name">'+k.name+"</p>",m+='    <p class="author">'+k.author+"</p>",m+='    <div class="percent">',m+='        <div class="line"></div>',m+="    </div>",m+='    <p class="time">',m+='        <span class="cur"></span>/<span class="total"></span>',m+="    </p>",m+='    <div class="volume">',m+='        <i class="icon"></i>',m+='        <div class="percent">',m+='            <div class="line"></div>',m+="        </div>",m+="    </div>",m+="</div>",m+='<div class="loading">',m+="    LOADING",m+="</div>",l.innerHTML=m;var n,o=l.querySelector("audio"),p=l.querySelector(".play-btn"),q=l.querySelector(".percent").querySelector(".line"),r=l.querySelector(".percent"),s=l.querySelector(".volume").querySelector(".line"),t=l.querySelector(".volume").querySelector(".percent"),u=l.querySelector(".cur"),v=l.querySelector(".total"),w=l.querySelector(".loading"),x=l.querySelector(".cover");j()},"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=skPlayer:a.skPlayer=skPlayer}(window);